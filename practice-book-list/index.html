<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: sans-serif;
    text-align: center;
  }

  .container {
    background-color: rgb(42, 116, 165);
    color: #fff;
    max-width: 700px;
    margin: 50px auto;
    padding: 20px;
    border-radius: 9px;
  }

  h1 {
    margin-bottom: 20px;
  }

  .flex-list {
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .delete,
  .edit,
  .save {
    background-color: #fff;
    color: #333;
    font-weight: 500;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
  }

  input {
    font-size: 18px;
    font-family: sans-serif;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 80%;

  }

  input.button {
    border: none;
    width: 80%;
    border-radius: 4px;
    padding: 5px 36px;
    font-size: 20px;
    margin-top: 20px;
    cursor: pointer;
  }

  .edit-book {
    text-align: left;
    padding: 10px 0px;
    width: 20%;
  }

  .edit {
    margin-left: auto;
    margin-right: 10px;
  }

  .name {
    font-size: 18px;
  }
</style>

<body>
  <div class="container">
    <h1> Books List</h1>
    <form id="search">
      <input type="text" placeholder="search for books">
    </form>
    <div id="book-list">
      <ul>
        <li class="flex-list">
          <span class="name">Book-1</span>

          <span class="edit">edit</span>
          <span Class="delete">Delete</span>

        </li>
        <li class="flex-list">
          <span class="name">Book-2</span>

          <span class="edit">edit</span>
          <span class="delete">Delete</span>

        </li>
        <li class="flex-list">
          <span class="name">Book-3</span>

          <span class="edit">edit</span>
          <span class="delete">Delete</span>

        </li>
        <li class="flex-list">
          <span class="name">Book-4</span>

          <span class="edit">edit</span>
          <span class="delete">Delete</span>

        </li>
      </ul>
    </div>
    <form id="add-form">
      <input type="text" placeholder="Enter any book" required />
      <input type="submit" class="button" />
    </form>
  </div>
</body>
<script>
  const list = document.querySelector('#book-list ul');

  let listArray = JSON.parse(localStorage.getItem('books')) || [];


  function displayBooks() {
    listArray.forEach((value) => {
      const li = document.createElement('li');
      const bookName = document.createElement('span');
      const editBtn = document.createElement('span');
      const deleteBtn = document.createElement('span');

      bookName.textContent = value;
      editBtn.textContent = 'edit';
      deleteBtn.textContent = 'delete';

      li.classList.add('flex-list');
      bookName.classList.add('name');
      editBtn.classList.add('edit');
      deleteBtn.classList.add('delete');

      li.appendChild(bookName);
      li.appendChild(editBtn);
      li.appendChild(deleteBtn);

      list.appendChild(li);
    });
  }

  displayBooks();

  list.addEventListener('click', (e) => {
    if (e.target.className == 'delete') {
      const li = e.target.parentElement;
      list.removeChild(li);
    }

    if (e.target.className == 'edit') {
      const li = e.target.parentElement;
      const bookName = li.querySelector('.name');

      bookName.setAttribute("contenteditable", "true");
      bookName.classList.add('edit-book')
      bookName.focus();

      li.querySelector('.edit').style.display = "none";
      li.querySelector('.delete').style.display = "none";

      let saveBtn = document.createElement('span');
      saveBtn.className = 'save';
      saveBtn.textContent = 'Save';

      e.target.parentElement.appendChild(saveBtn);
    }

    if (e.target.className == 'save') {

      const li = e.target.parentElement;
      const bookName = li.querySelector('.name');

      bookName.removeAttribute("contenteditable");

      li.querySelector('.edit').style.display = "inline";
      li.querySelector('.delete').style.display = "inline";

      e.target.style.display = "none";
    }

  });


  const addForms = document.forms['add-form'];
  addForms.addEventListener('submit', (e) => {
    e.preventDefault();
    const value = addForms.querySelector('input[type="text"]').value;

    listArray.push(value);
    localStorage.setItem('books', JSON.stringify(listArray));

    const li = document.createElement('li');
    const bookName = document.createElement('span');
    const editBtn = document.createElement('span')
    const deleteBtn = document.createElement('span');

    bookName.textContent = value;
    deleteBtn.textContent = 'delete';
    editBtn.textContent = 'edit';

    li.classList.add('flex-list');
    bookName.classList.add('name');
    editBtn.classList.add('edit');
    deleteBtn.classList.add('delete');


    li.appendChild(bookName);
    li.appendChild(editBtn);
    li.appendChild(deleteBtn);
    list.insertBefore(li, list.firstElementChild);

    e.target.reset();
  });

  const searchBar = document.forms['search'].querySelector('input');
  searchBar.addEventListener('keyup', (e) => {
    const term = e.target.value.toLowerCase();
    const books = list.querySelectorAll('li');

    books.forEach((book) => {
      const title = book.firstElementChild.textContent;
      if (title.toLowerCase().indexOf(term) != -1) {
        book.style.display = 'flex';
      } else {
        book.style.display = 'none';
      }
    });
  });

</script>

</html>