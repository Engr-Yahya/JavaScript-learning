<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: sans-serif;
    text-align: center;
  }

  .container {
    background-color: rgb(42, 116, 165);
    color: #fff;
    max-width: 700px;
    margin: 50px auto;
    padding: 20px;
    border-radius: 9px;
  }

  .flex-list {
    padding: 20px;
    list-style: decimal;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .delete,
  .edit,
  .save {
    background-color: #fff;
    color: #333;
    font-weight: 500;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
  }

  input {

    font-family: sans-serif;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    width: 80%;

  }

  input.button {
    border: none;
    width: 80%;
    border-radius: 4px;
    padding: 5px 36px;
    font-size: 20px;
    margin-top: 20px;
    cursor: pointer;
  }
</style>

<body>
  <div class="container">
    <form id="search">
      <input type="text" placeholder="search for books">
    </form>
    <div id="book-list">
      <ul>
        <li class="flex-list">
          <span class="name">Book-1</span>
          <div>
            <span class="edit">edit</span>
            <span Class="delete">Delete</span>
          </div>
        </li>
        <li class="flex-list">
          <span class="name">Book-2</span>
          <div>
            <span class="edit">edit</span>
            <span class="delete">Delete</span>
          </div>
        </li>
        <li class="flex-list">
          <span class="name">Book-3</span>
          <div>
            <span class="edit">edit</span>
            <span class="delete">Delete</span>
          </div>
        </li>
        <li class="flex-list">
          <span class="name">Book-4</span>
          <div>
            <span class="edit">edit</span>
            <span class="delete">Delete</span>
          </div>
        </li>
      </ul>
    </div>
    <form id="add-form">
      <input type="text" placeholder="Enter any book" />
      <input type="submit" class="button" />
    </form>
  </div>
</body>
<script>
  const list = document.querySelector('#book-list ul');
  list.addEventListener('click', (e) => {
    if (e.target.className == 'delete') {
      const li = e.target.closest('li');
      list.removeChild(li);
    }

    if (e.target.className === 'edit') {
      const li = e.target.closest('li');
      const bookName = li.querySelector('.name');
      const oldText = bookName.textContent;

      const input = document.createElement('input');
      input.type = "text";
      input.value = oldText;
      input.className = "edit-input";

      li.replaceChild(input, bookName);

      li.querySelector('.edit').style.display = "none";
      li.querySelector('.delete').style.display = "none";

      let saveBtn = li.querySelector('.save');
      if (!saveBtn) {
        saveBtn = document.createElement('span');
        saveBtn.className = 'save';
        saveBtn.textContent = "Save";
        li.appendChild(saveBtn);
      }

      saveBtn.style.display = "inline";
    }

    if (e.target.className == 'save') {
      const li = e.target.closest('li');
      const input = li.querySelector('.edit-input');
      const newText = input.value;

      const nameSpan = document.createElement('span');
      nameSpan.className = "name";
      nameSpan.textContent = newText;

      li.replaceChild(nameSpan, input);

      const btnDiv = li.querySelector('div');

      btnDiv.querySelector('.edit').style.display = "inline";
      btnDiv.querySelector('.delete').style.display = "inline";

      e.target.style.display = "none";
    }
  });

  const addForms = document.forms['add-form'];
  addForms.addEventListener('submit', (e) => {
    e.preventDefault();
    const value = addForms.querySelector('input[type="text"]').value;

    const li = document.createElement('li');
    const bookName = document.createElement('span');
    const newSpan = document.createElement('span')
    const deleteBtn = document.createElement('span');

    bookName.textContent = value;
    deleteBtn.textContent = 'delete';
    newSpan.textContent = 'edit';

    li.classList.add('flex-list');
    bookName.classList.add('name');
    newSpan.classList.add('edit');
    deleteBtn.classList.add('delete');


    li.appendChild(bookName);
    li.appendChild(deleteBtn);
    list.appendChild(li);

  })

  const searchBar = document.forms['search'].querySelector('input');
  searchBar.addEventListener('keyup', (e) => {
    const term = e.target.value.toLowerCase();
    const books = list.querySelectorAll('li');

    books.forEach((book) => {
      const title = book.firstElementChild.textContent;
      if (title.toLowerCase().indexOf(term) != -1) {
        book.style.display = 'flex';
      } else {
        book.style.display = 'none';
      }
    });
  });

</script>

</html>